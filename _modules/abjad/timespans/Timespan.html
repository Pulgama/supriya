

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>abjad.timespans.Timespan &mdash; Supriya 0.3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/uqbar.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Supriya
          

          
          </a>

          
            
            
              <div class="version">
                0.3.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../concepts.html">Core concepts</a></li>
</ul>
<p class="caption"><span class="caption-text">Guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../realtime/index.html">Real-time composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../synthdefs/index.html">Synth definitions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nonrealtime.html">Non-realtime composition</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../patterns.html">Patterns</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../osc.html">OSC</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../midi.html">MIDI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../performance.html">Live performance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../cli.html">CLI tools</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/filters.html">Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../examples/samplers.html">Samplers</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../api/supriya/index.html">supriya</a></li>
</ul>
<p class="caption"><span class="caption-text">Developers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/documenation.html">Sphinx &amp; IPython</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev/travisci.html">Travis-CI</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Supriya</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content style-external-links">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
      <li>abjad.timespans.Timespan</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for abjad.timespans.Timespan</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">abjad</span> <span class="k">import</span> <span class="n">enums</span>
<span class="kn">from</span> <span class="nn">abjad.system.AbjadValueObject</span> <span class="k">import</span> <span class="n">AbjadValueObject</span>
<span class="kn">from</span> <span class="nn">abjad.utilities</span> <span class="k">import</span> <span class="n">Infinity</span>
<span class="kn">from</span> <span class="nn">abjad.utilities</span> <span class="k">import</span> <span class="n">NegativeInfinity</span>


<span class="k">class</span> <span class="nc">Timespan</span><span class="p">(</span><span class="n">AbjadValueObject</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Timespan.</span>

<span class="sd">    ..  container:: example</span>

<span class="sd">        &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">        &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">        &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>
<span class="sd">        &gt;&gt;&gt; timespan_4 = abjad.Timespan(10, 20)</span>

<span class="sd">    Timespans are closed-open intervals.</span>

<span class="sd">    Timespans are immutable.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1">### CLASS VARIABLES ###</span>

    <span class="n">__documentation_section__</span> <span class="o">=</span> <span class="s1">&#39;Timespans&#39;</span>

    <span class="vm">__slots__</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;_start_offset&#39;</span><span class="p">,</span>
        <span class="s1">&#39;_stop_offset&#39;</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">_publish_storage_format</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1">### INITIALIZER ###</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_offset</span><span class="o">=</span><span class="n">NegativeInfinity</span><span class="p">,</span> <span class="n">stop_offset</span><span class="o">=</span><span class="n">Infinity</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">start_offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_offset</span> <span class="o">=</span> <span class="n">NegativeInfinity</span>
        <span class="k">if</span> <span class="n">stop_offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stop_offset</span> <span class="o">=</span> <span class="n">Infinity</span>
        <span class="n">start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_offset</span><span class="p">(</span><span class="n">start_offset</span><span class="p">)</span>
        <span class="n">stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_initialize_offset</span><span class="p">(</span><span class="n">stop_offset</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">start_offset</span> <span class="o">&lt;=</span> <span class="n">stop_offset</span><span class="p">,</span> <span class="nb">repr</span><span class="p">((</span><span class="n">start_offset</span><span class="p">,</span> <span class="n">stop_offset</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">=</span> <span class="n">start_offset</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">=</span> <span class="n">stop_offset</span>

    <span class="c1">### SPECIAL METHODS ###</span>

    <span class="k">def</span> <span class="nf">__and__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logical AND of two timespans.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &amp; timespan_2</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(5, 1), stop_offset=Offset(10, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &amp; timespan_3</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(0, 1), stop_offset=Offset(2, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &amp; timespan_4</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 &amp; timespan_3</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 &amp; timespan_4</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(10, 1), stop_offset=Offset(12, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_3 &amp; timespan_4</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">        Returns timespan list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">intersects_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">()</span>
        <span class="n">new_start_offset</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">start_offset</span><span class="p">)</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">stop_offset</span><span class="p">)</span>
        <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">([</span><span class="n">timespan</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__eq__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when ``argument`` is a timespan with equal offsets.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(1, 3) == abjad.Timespan(1, 3)</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(1, 3) == abjad.Timespan(2, 3)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__eq__</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__format__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">format_specification</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Formats timespan.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(timespan)</span>
<span class="sd">            abjad.Timespan(</span>
<span class="sd">                start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                )</span>

<span class="sd">        Returns string.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="k">if</span> <span class="n">format_specification</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;storage&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">StorageFormatManager</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">get_storage_format</span><span class="p">()</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__ge__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when ``argument`` start offset is greater or equal</span>
<span class="sd">        to timespan start offset.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 &gt;= timespan_3</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &gt;= timespan_2</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_start_offset_and_maybe_stop_offset</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr_stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&gt;=</span> <span class="n">expr_start_offset</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">==</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">&gt;=</span> <span class="n">expr_stop_offset</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&gt;=</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">__gt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when ``argument`` start offset is greater than</span>
<span class="sd">        timespan start offset.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 &gt; timespan_3</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &gt; timespan_2</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_start_offset_and_maybe_stop_offset</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr_stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&gt;</span> <span class="n">expr_start_offset</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">==</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">&gt;</span> <span class="n">expr_stop_offset</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&gt;</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">__hash__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Hashes timespan.</span>

<span class="sd">        Required to be explicitly redefined on Python 3 if __eq__ changes.</span>

<span class="sd">        Returns integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__hash__</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">__illustrate__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">range_</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Illustrates timespan.</span>

<span class="sd">        Returns LilyPond file.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">timespans</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">([</span><span class="bp">self</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">timespans</span><span class="o">.</span><span class="n">__illustrate__</span><span class="p">(</span>
            <span class="n">range_</span><span class="o">=</span><span class="n">range_</span><span class="p">,</span>
            <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">__le__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when ``argument`` start offset is less than or equal to</span>
<span class="sd">        timespan start offset.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 &lt;= timespan_3</span>
<span class="sd">            False</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &lt;= timespan_2</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_start_offset_and_maybe_stop_offset</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr_stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;=</span> <span class="n">expr_start_offset</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">==</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">&lt;=</span> <span class="n">expr_stop_offset</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;=</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Defined equal to ``1`` for all timespans.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; len(timespan)</span>
<span class="sd">            1</span>

<span class="sd">        Returns positive integer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="mi">1</span>

    <span class="k">def</span> <span class="nf">__lt__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when ``argument`` start offset is less than timespan start</span>
<span class="sd">        offset.</span>

<span class="sd">        ..  container::: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 &lt; timespan_2</span>
<span class="sd">            True</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 &lt; timespan_3</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> \
            <span class="bp">self</span><span class="o">.</span><span class="n">_get_start_offset_and_maybe_stop_offset</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">expr_stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span><span class="p">:</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">elif</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">==</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span><span class="p">):</span>
                <span class="k">return</span> <span class="kc">True</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">__or__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logical OR of two timespans.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_1 | timespan_2</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(12, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_1 | timespan_3</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(-2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_1 | timespan_4</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(20, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_2 | timespan_3</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(-2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(2, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(5, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(12, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_2 | timespan_4</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(5, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(20, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_3 | timespan_4</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(-2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(2, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(20, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        Returns timespan list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">intersects_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span> <span class="ow">and</span>
            <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_tangent_to_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">([</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">])</span>
            <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="n">new_start_offset</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">start_offset</span><span class="p">)</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">stop_offset</span><span class="p">)</span>
        <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">([</span><span class="n">timespan</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">__sub__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Subtract ``argument`` from timespan.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 - timespan_1</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 - timespan_2</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(0, 1), stop_offset=Offset(5, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 - timespan_3</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(2, 1), stop_offset=Offset(10, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 - timespan_4</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(0, 1), stop_offset=Offset(10, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 - timespan_1</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(10, 1), stop_offset=Offset(12, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 - timespan_2</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 - timespan_3</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(5, 1), stop_offset=Offset(12, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_2 - timespan_4</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(5, 1), stop_offset=Offset(10, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_3 - timespan_3</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">            &gt;&gt;&gt; timespan_3 - timespan_1</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(-2, 1), stop_offset=Offset(0, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_3 - timespan_2</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(-2, 1), stop_offset=Offset(2, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_3 - timespan_4</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(-2, 1), stop_offset=Offset(2, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_4 - timespan_4</span>
<span class="sd">            TimespanList([])</span>

<span class="sd">            &gt;&gt;&gt; timespan_4 - timespan_1</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(10, 1), stop_offset=Offset(20, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_4 - timespan_2</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(12, 1), stop_offset=Offset(20, 1))])</span>

<span class="sd">            &gt;&gt;&gt; timespan_4 - timespan_3</span>
<span class="sd">            TimespanList([Timespan(start_offset=Offset(10, 1), stop_offset=Offset(20, 1))])</span>

<span class="sd">        Returns timespan list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">timespans</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">intersects_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">elif</span> <span class="n">argument</span><span class="o">.</span><span class="n">trisects_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">start_offset</span>
            <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">stop_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>
            <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">argument</span><span class="o">.</span><span class="n">contains_timespan_improperly</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="n">argument</span><span class="o">.</span><span class="n">overlaps_only_start_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">stop_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>
            <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">argument</span><span class="o">.</span><span class="n">overlaps_only_stop_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">start_offset</span>
            <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">starts_when_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span>
            <span class="n">argument</span><span class="o">.</span><span class="n">stops_before_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">stop_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>
            <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">elif</span> <span class="p">(</span><span class="n">argument</span><span class="o">.</span><span class="n">stops_when_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="ow">and</span>
            <span class="n">argument</span><span class="o">.</span><span class="n">starts_after_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">start_offset</span>
            <span class="n">timespan</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">timespans</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">timespans</span>

    <span class="k">def</span> <span class="nf">__xor__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Logical XOR of two timespans.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 12)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(-2, 2)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_1 ^ timespan_2</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(5, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(12, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_1 ^ timespan_3</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(-2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_1 ^ timespan_4</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(20, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_2 ^ timespan_3</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(-2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(2, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(5, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(12, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_2 ^ timespan_4</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(5, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(12, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(20, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            &gt;&gt;&gt; new_timespan = timespan_3 ^ timespan_4</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(new_timespan)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(-2, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(2, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(20, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        Returns timespan list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">argument</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">intersects_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span> <span class="ow">or</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">is_tangent_to_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">()</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">argument</span><span class="p">))</span>
            <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
            <span class="k">return</span> <span class="n">result</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">()</span>
        <span class="n">start_offsets</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">start_offset</span><span class="p">]</span>
        <span class="n">stop_offsets</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">stop_offset</span><span class="p">]</span>
        <span class="n">start_offsets</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">stop_offsets</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="n">timespan_1</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">start_offsets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">start_offsets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="n">timespan_2</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">stop_offsets</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">stop_offsets</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="n">timespan_1</span><span class="o">.</span><span class="n">is_well_formed</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan_1</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">timespan_2</span><span class="o">.</span><span class="n">is_well_formed</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">timespan_2</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="c1">### PRIVATE METHODS ###</span>

    <span class="k">def</span> <span class="nf">_as_postscript</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">postscript_x_offset</span><span class="p">,</span>
        <span class="n">postscript_y_offset</span><span class="p">,</span>
        <span class="n">postscript_scale</span><span class="p">,</span>
        <span class="p">):</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">start</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">)</span> <span class="o">*</span> <span class="n">postscript_scale</span><span class="p">)</span>
        <span class="n">start</span> <span class="o">-=</span> <span class="n">postscript_x_offset</span>
        <span class="n">stop</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">)</span> <span class="o">*</span> <span class="n">postscript_scale</span><span class="p">)</span>
        <span class="n">stop</span> <span class="o">-=</span> <span class="n">postscript_x_offset</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Postscript</span><span class="p">()</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">moveto</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">postscript_y_offset</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">lineto</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">postscript_y_offset</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">stroke</span><span class="p">()</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">moveto</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">postscript_y_offset</span> <span class="o">+</span> <span class="mf">0.75</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">lineto</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">postscript_y_offset</span> <span class="o">-</span> <span class="mf">0.75</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">stroke</span><span class="p">()</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">moveto</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">postscript_y_offset</span> <span class="o">+</span> <span class="mf">0.75</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">lineto</span><span class="p">(</span><span class="n">stop</span><span class="p">,</span> <span class="n">postscript_y_offset</span> <span class="o">-</span> <span class="mf">0.75</span><span class="p">)</span>
        <span class="n">ps</span> <span class="o">=</span> <span class="n">ps</span><span class="o">.</span><span class="n">stroke</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">ps</span>

    <span class="k">def</span> <span class="nf">_can_fuse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)):</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">intersects_timespan</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span> <span class="ow">or</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">stops_when_timespan_starts</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_offsets</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">Timespan</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;timespan&#39;</span><span class="p">):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">timespan</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;_get_timespan&#39;</span><span class="p">):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">argument</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">,</span> <span class="n">argument</span><span class="o">.</span><span class="n">_stop_offset</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_get_start_offset_and_maybe_stop_offset</span><span class="p">(</span><span class="n">argument</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">Timespan</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;timespan&#39;</span><span class="p">):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">timespan</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;_get_timespan&#39;</span><span class="p">):</span>
            <span class="n">argument</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">()</span>
        <span class="n">start_offset</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;start_offset&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_offset</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="n">stop_offset</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;stop_offset&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">start_offset</span><span class="p">,</span> <span class="n">stop_offset</span>

    <span class="k">def</span> <span class="nf">_get_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">argument</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="n">Timespan</span><span class="p">):</span>
            <span class="n">start_offset</span><span class="p">,</span> <span class="n">stop_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">offsets</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;timespan&#39;</span><span class="p">):</span>
            <span class="n">start_offset</span><span class="p">,</span> <span class="n">stop_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">timespan</span><span class="o">.</span><span class="n">offsets</span>
        <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">argument</span><span class="p">,</span> <span class="s1">&#39;_get_timespan&#39;</span><span class="p">):</span>
            <span class="n">start_offset</span><span class="p">,</span> <span class="n">stop_offset</span> <span class="o">=</span> <span class="n">argument</span><span class="o">.</span><span class="n">_get_timespan</span><span class="p">()</span><span class="o">.</span><span class="n">offsets</span>
        <span class="c1"># TODO: remove this branch in favor of the _get_timespan above</span>
        <span class="c1">#elif hasattr(argument, &#39;timespan&#39;):</span>
        <span class="c1">#    start_offset, stop_offset = argument.timespan().offsets</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">argument</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">stop_offset</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">_implements_timespan_interface</span><span class="p">(</span><span class="n">timespan</span><span class="p">):</span>
        <span class="k">if</span> <span class="p">(</span>
            <span class="nb">getattr</span><span class="p">(</span><span class="n">timespan</span><span class="p">,</span> <span class="s1">&#39;start_offset&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;foo&#39;</span> <span class="ow">and</span>
            <span class="nb">getattr</span><span class="p">(</span><span class="n">timespan</span><span class="p">,</span> <span class="s1">&#39;stop_offset&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;foo&#39;</span>
            <span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">timespan</span><span class="p">,</span> <span class="s1">&#39;_get_timespan&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="c1"># TODO: remove this branch in favor of the _get_timespan above</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">timespan</span><span class="p">,</span> <span class="s1">&#39;timespan&#39;</span><span class="p">):</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">timespan</span><span class="p">,</span> <span class="s1">&#39;timespan&#39;</span><span class="p">,</span> <span class="s1">&#39;foo&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="s1">&#39;foo&#39;</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="nf">_initialize_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="k">if</span> <span class="n">offset</span> <span class="ow">in</span> <span class="p">(</span><span class="n">NegativeInfinity</span><span class="p">,</span> <span class="n">Infinity</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">offset</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>

    <span class="c1">### PUBLIC METHODS ###</span>

    <span class="k">def</span> <span class="nf">contains_timespan_improperly</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan contains ``timespan`` improperly.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.contains_timespan_improperly(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.contains_timespan_improperly(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.contains_timespan_improperly(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.contains_timespan_improperly(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;=</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
            <span class="n">expr_stop_offset</span> <span class="o">&lt;=</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">curtails_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan curtails ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.curtails_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.curtails_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.curtails_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.curtails_timespan(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;=</span> <span class="n">expr_stop_offset</span> <span class="ow">and</span>
            <span class="n">expr_stop_offset</span> <span class="o">&lt;=</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">delays_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan delays ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.delays_timespan(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.delays_timespan(timespan_3)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;=</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">divide_by_ratio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ratio</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Divides timespan by ``ratio``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan((1, 2), (3, 2))</span>

<span class="sd">            &gt;&gt;&gt; for x in timespan.divide_by_ratio((1, 2, 1)):</span>
<span class="sd">            ...     x</span>
<span class="sd">            Timespan(start_offset=Offset(1, 2), stop_offset=Offset(3, 4))</span>
<span class="sd">            Timespan(start_offset=Offset(3, 4), stop_offset=Offset(5, 4))</span>
<span class="sd">            Timespan(start_offset=Offset(5, 4), stop_offset=Offset(3, 2))</span>

<span class="sd">        Returns tuple of newly constructed timespans.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ratio</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">ratio</span> <span class="o">=</span> <span class="n">ratio</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">)</span>
        <span class="n">ratio</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Ratio</span><span class="p">(</span><span class="n">ratio</span><span class="p">)</span>
        <span class="n">unit_duration</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span> <span class="o">/</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ratio</span><span class="o">.</span><span class="n">numbers</span><span class="p">)</span>
        <span class="n">part_durations</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">numerator</span> <span class="o">*</span> <span class="n">unit_duration</span> <span class="k">for</span> <span class="n">numerator</span> <span class="ow">in</span> <span class="n">ratio</span><span class="o">.</span><span class="n">numbers</span>
            <span class="p">]</span>
        <span class="n">start_offsets</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">mathtools</span><span class="o">.</span><span class="n">cumulative_sums</span><span class="p">(</span>
            <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">]</span> <span class="o">+</span> <span class="n">part_durations</span><span class="p">,</span>
            <span class="n">start</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="n">offset_pairs</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">sequence</span><span class="p">(</span><span class="n">start_offsets</span><span class="p">)</span><span class="o">.</span><span class="n">nwise</span><span class="p">()</span>
        <span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)(</span><span class="o">*</span><span class="n">offset_pair</span><span class="p">)</span> <span class="k">for</span> <span class="n">offset_pair</span> <span class="ow">in</span> <span class="n">offset_pairs</span><span class="p">]</span>
        <span class="k">return</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_overlap_with_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Gets duration of overlap with ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 15)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(6, 6)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(12, 22)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.get_overlap_with_timespan(timespan_1)</span>
<span class="sd">            Duration(15, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.get_overlap_with_timespan(timespan_2)</span>
<span class="sd">            Duration(5, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.get_overlap_with_timespan(timespan_3)</span>
<span class="sd">            Duration(0, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.get_overlap_with_timespan(timespan_4)</span>
<span class="sd">            Duration(3, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_2.get_overlap_with_timespan(timespan_2)</span>
<span class="sd">            Duration(5, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_2.get_overlap_with_timespan(timespan_3)</span>
<span class="sd">            Duration(0, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_2.get_overlap_with_timespan(timespan_4)</span>
<span class="sd">            Duration(0, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_3.get_overlap_with_timespan(timespan_3)</span>
<span class="sd">            Duration(0, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_3.get_overlap_with_timespan(timespan_4)</span>
<span class="sd">            Duration(0, 1)</span>

<span class="sd">            &gt;&gt;&gt; timespan_4.get_overlap_with_timespan(timespan_4)</span>
<span class="sd">            Duration(10, 1)</span>

<span class="sd">        Returns duration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_implements_timespan_interface</span><span class="p">(</span><span class="n">timespan</span><span class="p">):</span>
            <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span>
                <span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">duration</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span> <span class="o">&amp;</span> <span class="n">timespan</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">happens_during_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan happens during ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.happens_during_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.happens_during_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.happens_during_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.happens_during_timespan(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;=</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
            <span class="n">self_stop_offset</span> <span class="o">&lt;=</span> <span class="n">expr_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">intersects_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan intersects ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(10, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.intersects_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.intersects_timespan(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.intersects_timespan(timespan_3)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="p">(</span>
                <span class="n">expr_start_offset</span> <span class="o">&lt;=</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
                <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span>
            <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span>
                <span class="n">self_start_offset</span> <span class="o">&lt;=</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
                <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_congruent_to_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan is congruent to ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.is_congruent_to_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.is_congruent_to_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.is_congruent_to_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.is_congruent_to_timespan(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">==</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
            <span class="n">expr_stop_offset</span> <span class="o">==</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">is_tangent_to_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan is tangent to ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.is_tangent_to_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.is_tangent_to_timespan(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.is_tangent_to_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.is_tangent_to_timespan(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_stop_offset</span> <span class="o">==</span> <span class="n">expr_start_offset</span> <span class="ow">or</span>
            <span class="n">expr_stop_offset</span> <span class="o">==</span> <span class="n">self_start_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">overlaps_all_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan overlaps all of ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 6)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(5, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_all_of_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_all_of_timespan(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_all_of_timespan(timespan_3)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
            <span class="n">expr_stop_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">overlaps_only_start_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan overlaps only start of ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(-5, 5)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(4, 6)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_start_of_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_start_of_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_start_of_timespan(timespan_3)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_start_of_timespan(timespan_4)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span> <span class="ow">and</span>
            <span class="n">self_stop_offset</span> <span class="o">&lt;=</span> <span class="n">expr_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">overlaps_only_stop_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan overlaps only stop of ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(-5, 5)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(4, 6)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_stop_of_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_stop_of_timespan(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_stop_of_timespan(timespan_3)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_only_stop_of_timespan(timespan_4)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;=</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span> <span class="ow">and</span>
            <span class="n">expr_stop_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">overlaps_start_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan overlaps start of ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(-5, 5)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(4, 6)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_start_of_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_start_of_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_start_of_timespan(timespan_3)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_start_of_timespan(timespan_4)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span> <span class="ow">and</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">overlaps_stop_of_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan overlaps start of ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(-5, 5)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(4, 6)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_stop_of_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_stop_of_timespan(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_stop_of_timespan(timespan_3)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.overlaps_stop_of_timespan(timespan_4)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span> <span class="ow">and</span>
            <span class="n">expr_stop_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">reflect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reflects timespan about ``axis``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Reverse timespan about timespan axis:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 6).reflect()</span>
<span class="sd">            Timespan(start_offset=Offset(3, 1), stop_offset=Offset(6, 1))</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Reverse timespan about arbitrary axis:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 6).reflect(axis=abjad.Offset(10))</span>
<span class="sd">            Timespan(start_offset=Offset(14, 1), stop_offset=Offset(17, 1))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">axis</span>
        <span class="n">start_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">-</span> <span class="n">axis</span>
        <span class="n">stop_distance</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">-</span> <span class="n">axis</span>
        <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">axis</span> <span class="o">-</span> <span class="n">stop_distance</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">axis</span> <span class="o">-</span> <span class="n">start_distance</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">set_offsets</span><span class="p">(</span><span class="n">new_start_offset</span><span class="p">,</span> <span class="n">new_stop_offset</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">round_offsets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">enums</span><span class="o">.</span><span class="n">Left</span><span class="p">,</span> <span class="n">must_be_well_formed</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rounds timespan offsets to multiple of ``multiplier``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan((1, 5), (4, 5))</span>

<span class="sd">            &gt;&gt;&gt; timespan.round_offsets(1)</span>
<span class="sd">            Timespan(start_offset=Offset(0, 1), stop_offset=Offset(1, 1))</span>

<span class="sd">            &gt;&gt;&gt; timespan.round_offsets(2)</span>
<span class="sd">            Timespan(start_offset=Offset(0, 1), stop_offset=Offset(2, 1))</span>

<span class="sd">            &gt;&gt;&gt; timespan.round_offsets(</span>
<span class="sd">            ...     2,</span>
<span class="sd">            ...     anchor=abjad.Right,</span>
<span class="sd">            ...     )</span>
<span class="sd">            Timespan(start_offset=Offset(-2, 1), stop_offset=Offset(0, 1))</span>

<span class="sd">            &gt;&gt;&gt; timespan.round_offsets(</span>
<span class="sd">            ...     2,</span>
<span class="sd">            ...     anchor=abjad.Right,</span>
<span class="sd">            ...     must_be_well_formed=False,</span>
<span class="sd">            ...     )</span>
<span class="sd">            Timespan(start_offset=Offset(0, 1), stop_offset=Offset(0, 1))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">multiplier</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">Multiplier</span><span class="p">(</span><span class="n">multiplier</span><span class="p">))</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">multiplier</span>
        <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">/</span> <span class="n">multiplier</span><span class="p">))</span> <span class="o">*</span> <span class="n">multiplier</span><span class="p">)</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span>
            <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">/</span> <span class="n">multiplier</span><span class="p">))</span> <span class="o">*</span> <span class="n">multiplier</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">new_start_offset</span> <span class="o">==</span> <span class="n">new_stop_offset</span><span class="p">)</span> <span class="ow">and</span> <span class="n">must_be_well_formed</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="n">enums</span><span class="o">.</span><span class="n">Left</span><span class="p">:</span>
                <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">new_stop_offset</span> <span class="o">+</span> <span class="n">multiplier</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">new_start_offset</span> <span class="o">-</span> <span class="n">multiplier</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">scale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="n">enums</span><span class="o">.</span><span class="n">Left</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Scales timespan by ``multiplier``.</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan(3, 6)</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Scale timespan relative to timespan start offset:</span>

<span class="sd">            &gt;&gt;&gt; timespan.scale(abjad.Multiplier(2))</span>
<span class="sd">            Timespan(start_offset=Offset(3, 1), stop_offset=Offset(9, 1))</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            Scale timespan relative to timespan stop offset:</span>

<span class="sd">            &gt;&gt;&gt; timespan.scale(abjad.Multiplier(2), anchor=abjad.Right)</span>
<span class="sd">            Timespan(start_offset=Offset(0, 1), stop_offset=Offset(6, 1))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">multiplier</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Multiplier</span><span class="p">(</span><span class="n">multiplier</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">multiplier</span>
        <span class="n">new_duration</span> <span class="o">=</span> <span class="n">multiplier</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span>
        <span class="k">if</span> <span class="n">anchor</span> <span class="o">==</span> <span class="n">enums</span><span class="o">.</span><span class="n">Left</span><span class="p">:</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">+</span> <span class="n">new_duration</span>
        <span class="k">elif</span> <span class="n">anchor</span> <span class="o">==</span> <span class="n">enums</span><span class="o">.</span><span class="n">Right</span><span class="p">:</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">-</span> <span class="n">new_duration</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="s1">&#39;unknown anchor direction: </span><span class="si">{!r}</span><span class="s1">.&#39;</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">anchor</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">set_duration</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">duration</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets timespan duration to ``duration``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan((1, 2), (3, 2))</span>

<span class="sd">            &gt;&gt;&gt; timespan.set_duration((3, 5))</span>
<span class="sd">            Timespan(start_offset=Offset(1, 2), stop_offset=Offset(11, 10))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">duration</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">duration</span><span class="p">)</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">+</span> <span class="n">duration</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_offsets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">start_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">stop_offset</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Sets timespan start offset to ``start_offset`` and</span>
<span class="sd">        stop offset to ``stop_offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan((1, 2), (3, 2))</span>

<span class="sd">            &gt;&gt;&gt; timespan.set_offsets(stop_offset=(7, 8))</span>
<span class="sd">            Timespan(start_offset=Offset(1, 2), stop_offset=Offset(7, 8))</span>

<span class="sd">        Subtracts negative ``start_offset`` from existing stop offset:</span>

<span class="sd">        &gt;&gt;&gt; timespan.set_offsets(start_offset=(-1, 2))</span>
<span class="sd">        Timespan(start_offset=Offset(1, 1), stop_offset=Offset(3, 2))</span>

<span class="sd">        Subtracts negative ``stop_offset`` from existing stop offset:</span>

<span class="sd">        &gt;&gt;&gt; timespan.set_offsets(stop_offset=(-1, 2))</span>
<span class="sd">        Timespan(start_offset=Offset(1, 2), stop_offset=Offset(1, 1))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="k">if</span> <span class="n">start_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">start_offset</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">stop_offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">stop_offset</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">start_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">start_offset</span><span class="p">:</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="n">start_offset</span>
        <span class="k">elif</span> <span class="n">start_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">start_offset</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">+</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">start_offset</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>
        <span class="k">if</span> <span class="n">stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">stop_offset</span><span class="p">:</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="n">stop_offset</span>
        <span class="k">elif</span> <span class="n">stop_offset</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">stop_offset</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> \
                <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">+</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">stop_offset</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="c1"># TODO: extend to self.split_at_offsets()</span>
    <span class="k">def</span> <span class="nf">split_at_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Split into two parts when ``offset`` happens during timespan:</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan(0, 5)</span>

<span class="sd">            &gt;&gt;&gt; left, right = timespan.split_at_offset((2, 1))</span>

<span class="sd">            &gt;&gt;&gt; left</span>
<span class="sd">            Timespan(start_offset=Offset(0, 1), stop_offset=Offset(2, 1))</span>

<span class="sd">            &gt;&gt;&gt; right</span>
<span class="sd">            Timespan(start_offset=Offset(2, 1), stop_offset=Offset(5, 1))</span>

<span class="sd">            Otherwise return a copy of timespan:</span>

<span class="sd">            &gt;&gt;&gt; timespan.split_at_offset((12, 1))[0]</span>
<span class="sd">            Timespan(start_offset=Offset(0, 1), stop_offset=Offset(5, 1))</span>

<span class="sd">        Returns one or two newly constructed timespans.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">:</span>
            <span class="n">left</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">right</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">start_offset</span><span class="o">=</span><span class="n">offset</span><span class="p">,</span>
                <span class="n">stop_offset</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">split_at_offsets</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offsets</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Split into one or more parts when ``offsets`` happens during</span>
<span class="sd">        timespan:</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; result = timespan.split_at_offsets((1, 3, 7))</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(result)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(1, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(1, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(3, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(3, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(7, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(7, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">            Otherwise return a timespan list containing a copy of timespan:</span>

<span class="sd">            &gt;&gt;&gt; result = timespan.split_at_offsets((-100,))</span>
<span class="sd">            &gt;&gt;&gt; abjad.f(result)</span>
<span class="sd">            abjad.TimespanList(</span>
<span class="sd">                [</span>
<span class="sd">                    abjad.Timespan(</span>
<span class="sd">                        start_offset=abjad.Offset(0, 1),</span>
<span class="sd">                        stop_offset=abjad.Offset(10, 1),</span>
<span class="sd">                        ),</span>
<span class="sd">                    ]</span>
<span class="sd">                )</span>

<span class="sd">        Returns one or more newly constructed timespans.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span> <span class="k">for</span> <span class="n">offset</span> <span class="ow">in</span> <span class="n">offsets</span><span class="p">]</span>
        <span class="n">offsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">offset</span> <span class="k">for</span> <span class="n">offset</span> <span class="ow">in</span> <span class="n">offsets</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">]</span>
        <span class="n">offsets</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">offsets</span><span class="p">))</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">TimespanList</span><span class="p">()</span>
        <span class="n">right</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">offset</span> <span class="ow">in</span> <span class="n">offsets</span><span class="p">:</span>
            <span class="n">left</span><span class="p">,</span> <span class="n">right</span> <span class="o">=</span> <span class="n">right</span><span class="o">.</span><span class="n">split_at_offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">left</span><span class="p">)</span>
        <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">right</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">starts_after_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan overlaps start of ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_offset((-5, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_offset((0, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>

    <span class="k">def</span> <span class="nf">starts_after_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts after ``timespan`` starts.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_after_timespan_starts(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_after_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_start_offset</span>

    <span class="k">def</span> <span class="nf">starts_after_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts after ``timespan`` stops.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>
<span class="sd">            &gt;&gt;&gt; timespan_3 = abjad.Timespan(10, 20)</span>
<span class="sd">            &gt;&gt;&gt; timespan_4 = abjad.Timespan(15, 25)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_after_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_3.starts_after_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_4.starts_after_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr_stop_offset</span> <span class="o">&lt;=</span> <span class="n">self_start_offset</span>

    <span class="k">def</span> <span class="nf">starts_at_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts at ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_at_offset((-5, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_at_offset((0, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_at_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">==</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="nf">starts_at_or_after_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts at or after ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_at_or_after_offset((-5, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_at_or_after_offset((0, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_at_or_after_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">offset</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>

    <span class="k">def</span> <span class="nf">starts_before_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts before ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_offset((-5, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_offset((0, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_offset((5, 1))</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="nf">starts_before_or_at_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts before or at ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_or_at_offset((-5, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_or_at_offset((0, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_or_at_offset((5, 1))</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;=</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="nf">starts_before_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts before ``timespan`` starts.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_timespan_starts(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_before_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_before_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">starts_before_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts before ``timespan`` stops.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_before_timespan_stops(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_before_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_before_timespan_stops(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span>

    <span class="k">def</span> <span class="nf">starts_during_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts during ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_during_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_during_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_during_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_during_timespan(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;=</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
            <span class="n">self_start_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">starts_when_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts when ``timespan`` starts.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 15)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_when_timespan_starts(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_when_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_when_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_when_timespan_starts(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr_start_offset</span> <span class="o">==</span> <span class="n">self_start_offset</span>

    <span class="k">def</span> <span class="nf">starts_when_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan starts when ``timespan`` stops.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_when_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_when_timespan_stops(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_when_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.starts_when_timespan_stops(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_start_offset</span> <span class="o">==</span> <span class="n">expr_stop_offset</span>

    <span class="k">def</span> <span class="nf">stops_after_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops after ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_offset((-5, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_offset((0, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.starts_after_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">offset</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>

    <span class="k">def</span> <span class="nf">stops_after_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops when ``timespan`` starts.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_after_timespan_starts(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_after_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_after_timespan_starts(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_after_timespan_starts(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>

    <span class="k">def</span> <span class="nf">stops_after_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops when ``timespan`` stops.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_after_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_after_timespan_stops(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_after_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_after_timespan_stops(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">expr_stop_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span>

    <span class="k">def</span> <span class="nf">stops_at_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops at ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_at_offset((-5, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_at_offset((0, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_at_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">==</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="nf">stops_at_or_after_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops at or after ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_at_or_after_offset((-5, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_at_or_after_offset((0, 1))</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_at_or_after_offset((5, 1))</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">offset</span> <span class="o">&lt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>

    <span class="k">def</span> <span class="nf">stops_before_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops before ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_offset((-5, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_offset((0, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">&lt;</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="nf">stops_before_or_at_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops before or at ``offset``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_or_at_offset((-5, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_or_at_offset((0, 1))</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_or_at_offset((5, 1))</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Offset</span><span class="p">(</span><span class="n">offset</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">&lt;=</span> <span class="n">offset</span>

    <span class="k">def</span> <span class="nf">stops_before_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops before ``timespan`` starts.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_before_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_before_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_stop_offset</span> <span class="o">&lt;</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">stops_before_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops before ``timespan`` stops.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_before_timespan_stops(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_before_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_before_timespan_stops(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_stop_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span>

    <span class="k">def</span> <span class="nf">stops_during_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops during ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_during_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_during_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_during_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_during_timespan(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_stop_offset</span> <span class="ow">and</span>
            <span class="n">self_stop_offset</span> <span class="o">&lt;=</span> <span class="n">expr_stop_offset</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">stops_when_timespan_starts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops when ``timespan`` starts.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_when_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_when_timespan_starts(timespan_2)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_when_timespan_starts(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_when_timespan_starts(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_stop_offset</span> <span class="o">==</span> <span class="n">expr_start_offset</span>

    <span class="k">def</span> <span class="nf">stops_when_timespan_stops</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan stops when ``timespan`` stops.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(10, 20)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.stops_when_timespan_stops(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.stops_when_timespan_stops(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_when_timespan_stops(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.stops_when_timespan_stops(timespan_2)</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">self_stop_offset</span> <span class="o">==</span> <span class="n">expr_stop_offset</span>

    <span class="k">def</span> <span class="nf">stretch</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">multiplier</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stretches timespan by ``multiplier`` relative to ``anchor``.</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            Stretch relative to timespan start offset:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 10).stretch(abjad.Multiplier(2))</span>
<span class="sd">            Timespan(start_offset=Offset(3, 1), stop_offset=Offset(17, 1))</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            Stretch relative to timespan stop offset:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 10).stretch(</span>
<span class="sd">            ...     abjad.Multiplier(2),</span>
<span class="sd">            ...     abjad.Offset(10),</span>
<span class="sd">            ...     )</span>
<span class="sd">            Timespan(start_offset=Offset(-4, 1), stop_offset=Offset(10, 1))</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            Stretch relative to offset prior to timespan:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 10).stretch(</span>
<span class="sd">            ...     abjad.Multiplier(2),</span>
<span class="sd">            ...     abjad.Offset(0, 1),</span>
<span class="sd">            ...     )</span>
<span class="sd">            Timespan(start_offset=Offset(6, 1), stop_offset=Offset(20, 1))</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            Stretch relative to offset after timespan:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 10).stretch(</span>
<span class="sd">            ...     abjad.Multiplier(3),</span>
<span class="sd">            ...     abjad.Offset(12),</span>
<span class="sd">            ...     )</span>
<span class="sd">            Timespan(start_offset=Offset(-15, 1), stop_offset=Offset(6, 1))</span>

<span class="sd">        .. container:: example</span>

<span class="sd">            Stretch relative to offset that happens during timespan:</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(3, 10).stretch(</span>
<span class="sd">            ...     abjad.Multiplier(2),</span>
<span class="sd">            ...     abjad.Offset(4),</span>
<span class="sd">            ...     )</span>
<span class="sd">            Timespan(start_offset=Offset(2, 1), stop_offset=Offset(16, 1))</span>

<span class="sd">        Returns newly emitted timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">multiplier</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Multiplier</span><span class="p">(</span><span class="n">multiplier</span><span class="p">)</span>
        <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;</span> <span class="n">multiplier</span>
        <span class="k">if</span> <span class="n">anchor</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">anchor</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>
        <span class="n">new_start_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">multiplier</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">-</span> <span class="n">anchor</span><span class="p">))</span> <span class="o">+</span> <span class="n">anchor</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="p">(</span><span class="n">multiplier</span> <span class="o">*</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">-</span> <span class="n">anchor</span><span class="p">))</span> <span class="o">+</span> <span class="n">anchor</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">result</span>

    <span class="k">def</span> <span class="nf">translate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">translation</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Translates timespan by ``translation``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan(5, 10)</span>

<span class="sd">            &gt;&gt;&gt; timespan.translate(2)</span>
<span class="sd">            Timespan(start_offset=Offset(7, 1), stop_offset=Offset(12, 1))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">translate_offsets</span><span class="p">(</span><span class="n">translation</span><span class="p">,</span> <span class="n">translation</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">translate_offsets</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">start_offset_translation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">stop_offset_translation</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Translates timespan start offset by ``start_offset_translation`` and</span>
<span class="sd">        stop offset by ``stop_offset_translation``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan = abjad.Timespan((1, 2), (3, 2))</span>

<span class="sd">            &gt;&gt;&gt; timespan.translate_offsets(start_offset_translation=(-1, 8))</span>
<span class="sd">            Timespan(start_offset=Offset(3, 8), stop_offset=Offset(3, 2))</span>

<span class="sd">        Returns new timespan.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">abjad</span>
        <span class="n">start_offset_translation</span> <span class="o">=</span> <span class="n">start_offset_translation</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="n">stop_offset_translation</span> <span class="o">=</span> <span class="n">stop_offset_translation</span> <span class="ow">or</span> <span class="mi">0</span>
        <span class="n">start_offset_translation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">start_offset_translation</span><span class="p">)</span>
        <span class="n">stop_offset_translation</span> <span class="o">=</span> <span class="n">abjad</span><span class="o">.</span><span class="n">Duration</span><span class="p">(</span><span class="n">stop_offset_translation</span><span class="p">)</span>
        <span class="n">new_start_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">+</span> <span class="n">start_offset_translation</span>
        <span class="n">new_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">+</span> <span class="n">stop_offset_translation</span>
        <span class="k">return</span> <span class="n">abjad</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">start_offset</span><span class="o">=</span><span class="n">new_start_offset</span><span class="p">,</span>
            <span class="n">stop_offset</span><span class="o">=</span><span class="n">new_stop_offset</span><span class="p">,</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">trisects_timespan</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">timespan</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan trisects ``timespan``.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; timespan_1 = abjad.Timespan(0, 10)</span>
<span class="sd">            &gt;&gt;&gt; timespan_2 = abjad.Timespan(5, 6)</span>

<span class="sd">            &gt;&gt;&gt; timespan_1.trisects_timespan(timespan_1)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_1.trisects_timespan(timespan_2)</span>
<span class="sd">            False</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.trisects_timespan(timespan_1)</span>
<span class="sd">            True</span>
<span class="sd">            &gt;&gt;&gt; timespan_2.trisects_timespan(timespan_2)</span>
<span class="sd">            False</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">self_start_offset</span><span class="p">,</span> <span class="n">self_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">offsets</span>
        <span class="n">expr_start_offset</span><span class="p">,</span> <span class="n">expr_stop_offset</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_offsets</span><span class="p">(</span><span class="n">timespan</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span>
            <span class="n">expr_start_offset</span> <span class="o">&lt;</span> <span class="n">self_start_offset</span> <span class="ow">and</span>
            <span class="n">self_stop_offset</span> <span class="o">&lt;</span> <span class="n">expr_stop_offset</span>
            <span class="p">)</span>

    <span class="c1">### PUBLIC PROPERTIES ###</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">axis</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Arithmetic mean of timespan start- and stop-offsets.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(0, 10).axis</span>
<span class="sd">            Offset(5, 1)</span>

<span class="sd">        Returns offset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">duration</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Duration of timespan.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(0, 10).duration</span>
<span class="sd">            Duration(10, 1)</span>

<span class="sd">        Returns duration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_well_formed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Is true when timespan start offset preceeds timespan stop offset.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(0, 10).is_well_formed</span>
<span class="sd">            True</span>

<span class="sd">        Returns true or false.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">offsets</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Timespan offsets.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(0, 10).offsets</span>
<span class="sd">            (Offset(0, 1), Offset(10, 1))</span>

<span class="sd">        Returns offset pair.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">start_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Timespan start offset.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(0, 10).start_offset</span>
<span class="sd">            Offset(0, 1)</span>

<span class="sd">        Returns offset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_start_offset</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">stop_offset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Timespan stop offset.</span>

<span class="sd">        ..  container:: example</span>

<span class="sd">            &gt;&gt;&gt; abjad.Timespan(0, 10).stop_offset</span>
<span class="sd">            Offset(10, 1)</span>

<span class="sd">        Returns offset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_stop_offset</span>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, Josiah Wolf Oberholtzer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>